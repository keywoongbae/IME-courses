# 15. Options on Stock Indices and Currencies

### European Options on Stocks Paying Continuous Dividends

배당률 q를 가지는 주가지수 상품에 대하여 현재 $e^{-q(T-t)}$ 단위 만큼이 만기일에 1단위만큼 된다.

### Extension

콜옵션의 하한선
$c \geq Se^{-q(T-t)} - Ke^{-r(T-t)}$

풋옵션의 하한선
$p \geq Ke^{-r(T-t)}-Se^{-q(T-t)}$

풋콜 짝공식
$c+Ke^{-r(T-t)}=p + Se^{-q(T-t)}$

**Black-Scholes Formulas**

European Put option과 Call Option의 가격은 다음과 같다.

$c = Se^{-q(T-t)}N(d_1)-Ke^{-r(T-t)}N(d_2)$

$p = Ke^{-r(T-t)}N(-d_2)-Se^{-q(T-t)}N(-d_1)$

이때 $d_1$과 $d_2$는 다음과 같다.

$d_1 = \frac{ln(S/K)+(r-q+\frac{\sigma^2}{2})(T-t)}{\sigma \sqrt{T-t}}$

$d_2 = \frac{ln(S/K)+(r-q-\frac{\sigma^2}{2})(T-t)}{\sigma \sqrt{T-t}}=d_1 - \sigma \sqrt{T-t}$

**Binomial Trees**

주식가격이 S에서 Su, Sd로 변하는 경우, 주식가격은 r이 아니라 r-q만큼 상승한다. 따라서 $p=\frac{e^{(r-q)(T-t)}-d}{u-d}$이다.

옵션의 가치는 $f = e^{-r(T-t)}[pf_u + (1-p)f_d]$

>예제
>현재 주식가격이 30달러이고, 행사가격은 28달러인 풋옵션이 있다. r은 5%이고, q는 3%이며, u = 1.2, d = 0.8이라고 하자. 6개월 만기일 때, 풋옵션의 가치는?
>
>✅
>
>$p=\frac{e^{(0.05-0.03)*0.5}-0.8}{0.4}=0.525$
>
>$f=e^{-0.05*0.5}[0.525*30*1.2-0.475*30*0.8]=1.85$

### Using Index Options for Portfolio Insurance

Portfolio

- $\beta = 1$ : 포트폴리오의 수익률이 주가지수 수익률과 같다.
- $\beta =2$ : 포트폴리오의 수익률이 주가지수 수익률의 2배이다.

>예제
>포트폴리오의 가치가 50만달러이다. S&P 주식은 1000이며, 포트폴리오의 $\beta=1$이다. 
>목표는 3개월동안 포트폴리오의 가치가 45만달러 이하로 하락하는 것을 방지하고자 한다.
>행사가격이 900인 3개월 만기의 풋옵션을 이용한 방법은? 이때 옵션 1계약의 크기는 100x(주가지수)이다.
>
>✅
>
>옵션 1계약의 크기는 100달러x주가지수 = 100S=10만달러이다.
>행사가격이 900인 풋옵션을 5개 매입한다. 이때 풋옵션의 가격이 6.48달러라고 했을 때, 매입 비용은 5x100x6.48=3240달러가 든다.
>
>3개월 후, 주가지수가 880으로 12% 하락한 경우, 포트폴리오의 가치 역시 떨어져 500,000x0.88=440,000달러가 된다. 이때 풋옵션의 이익은 가격이 떨어진 만큼 얻으므로 5x(1000-880)x100=10,000달러이다. 3개월 후 총 가치는 440,000+10,000=450,000가 된다.



> 예제 
>
> 포트폴리오의 가치는 50만 달러이며, 주가지수는 1000 , r=12%, q=4%이다.
>
> 만약 $\beta$가 1이 아니라 2인 경우, 포트폴리오의 가치가 45만 달러 이하로 하락하는 것을 방지하기 위해서 필요한 옵션의 계약의 수와 행사가격은?
>
> ✅
>
> 옵션 1 계약의 크기는 100S=10만 달러이므로, 필요한 풋옵션의 수는 2x5=10이다. 
>
> 3개월 후 주가지수가 1040으로 4% 상승한 경우, 배당률을 포함한 총 수익은 4%+1%($\frac{3}{12}$)=5%
> 무위험 이자율은 12%x$\frac{3}{12}$=3%
>
> 주식으로부터 얻는 무위험 이자율로부터 초과수익 : 5%-3%=2%
> 포트폴리오로부터 얻는 초과 수익률 : 2x2%=4%
>
> 따라서 포트폴리오의 수익률은 4%+3%=7%이다.
>
> 포트폴리오의 증가율은 7%에서 배당율인 1%를 뺀 값인 6%가 되므로, 최종 포트폴리오의 가치는 1.06x500,000=530,000가 된다.

### Currency Options

외국 통화의 금리가 $r_f$일 때, 현재 $e^{-r_f(T-t)}$만큼의 외국통화가 만기일에 1만큼의 외국통화가 된다.

외국통화 상품은 배당률 $r_f$를 가지는 주가지수 상품으로 생각할 수 있다. 

### Formulas for European Currency Options

$c \geq Se^{-r_f(T-t)}-Ke^{-r(T-t)}$

$p \geq Ke^{-r(T-t)}-Se^{-r_f(T-t)}$

$c+Ke^{-r(T-t)}=p+Se^{-r_f(T-t)}$



$c \geq Se^{-r_f(T-t)}N(d_1)-Ke^{-r(T-t)}N(d_2)$

$p \geq Ke^{r(T-t)}N(-d_2)-Se^{-r_f(T-t)}N(-d_1)$

where
$d_1 = \frac{ln(S/K)+(r-r_f+\frac{\sigma^2}{2})\Delta t}{\sigma \sqrt{\Delta t}}$

$d_2 = \frac{ln(S/K)+(r-r_f-\frac{\sigma^2}{2})\Delta t}{\sigma \sqrt{\Delta t}}$

> ❓ 예제
>
> 4개월 만기 European 콜옵션이 다음과 같다. 
>
> - 주식가격 1.6
> - 행사가격 1.6
> - US 무위험 이자율 = 8%
> - 영국 무위험 이자율 = 11%
>
> 콜옵션의 가격이 0.043달러일 때 $\sigma$의 값은?
>
> ✅
>
> $c = Se^{-r_f(T-t)}N(d_1)-Ke^{-r(T-t)}N(d_2)$
>
> $0.043 = 1.6e^{-0.11*\frac{4}{12}}N(d_1)-1.6e^{-0.11*\frac{4}{12}}N(d_2)$
>
> $d_1 = \frac{ln(S/K)+(r-r_f+\frac{\sigma^2}{2})\Delta t}{\sigma \sqrt{\Delta t}}$
>
> $d_2 = \frac{ln(S/K)+(r-r_f-\frac{\sigma^2}{2})\Delta t}{\sigma \sqrt{\Delta t}}$